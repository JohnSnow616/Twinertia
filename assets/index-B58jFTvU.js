var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-y5S3hZEA.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var i=s();class o extends i.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class n extends i.Scene{constructor(){super("GameOver"),e(this,"camera"),e(this,"background"),e(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(0,0,"background").setOrigin(0).setAlpha(.5),this.gameover_text=this.add.text(0,0,"Game Over",{fontFamily:"Arial Black",fontSize:"64px",color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.updateLayout(this.scale.width,this.scale.height),this.scale.on("resize",(t=>{const{width:e,height:s}=t;this.updateLayout(e,s)})),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}updateLayout(t,e){this.cameras.resize(t,e),this.background&&this.background.setDisplaySize(t,e);const s=Math.min(Math.min(t/1024,e/768),1);this.gameover_text&&(this.gameover_text.setPosition(t/2,e/2),this.gameover_text.setScale(s))}}class a extends i.Scene{constructor(){super("Game"),e(this,"camera"),e(this,"background"),e(this,"msg_text"),e(this,"count",0),e(this,"countText"),e(this,"incButton"),e(this,"decButton"),e(this,"goButton")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(2236962),this.background=this.add.image(512,384,"background").setAlpha(.25),this.countText=this.add.text(512,340,`Count: ${this.count}`,{fontFamily:"Arial Black",fontSize:56,color:"#ffd700",stroke:"#000000",strokeThickness:10}).setOrigin(.5),(async()=>{try{const t=await fetch("/api/init");if(!t.ok)throw new Error(`API error: ${t.status}`);const e=await t.json();this.count=e.count,this.updateCountText()}catch(t){console.error("Failed to fetch initial count:",t)}})();const t=(t,e,s,i)=>{const o=this.add.text(512,t,e,{fontFamily:"Arial Black",fontSize:36,color:s,backgroundColor:"#444444",padding:{x:25,y:12}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",(()=>o.setStyle({backgroundColor:"#555555"}))).on("pointerout",(()=>o.setStyle({backgroundColor:"#444444"}))).on("pointerdown",i);return o};this.incButton=t(.55*this.scale.height,"Increment","#00ff00",(async()=>{try{const t=await fetch("/api/increment",{method:"POST"});if(!t.ok)throw new Error(`API error: ${t.status}`);const e=await t.json();this.count=e.count,this.updateCountText()}catch(t){console.error("Failed to increment count:",t)}})),this.decButton=t(.65*this.scale.height,"Decrement","#ff5555",(async()=>{try{const t=await fetch("/api/decrement",{method:"POST"});if(!t.ok)throw new Error(`API error: ${t.status}`);const e=await t.json();this.count=e.count,this.updateCountText()}catch(t){console.error("Failed to decrement count:",t)}})),this.goButton=t(.75*this.scale.height,"Game Over","#ffffff",(()=>{this.scene.start("GameOver")})),this.updateLayout(this.scale.width,this.scale.height),this.scale.on("resize",(t=>{const{width:e,height:s}=t;this.updateLayout(e,s)}))}updateLayout(t,e){if(this.cameras.resize(t,e),this.background&&(this.background.setPosition(t/2,e/2),this.background.width&&this.background.height)){const s=Math.max(t/this.background.width,e/this.background.height);this.background.setScale(s)}const s=Math.min(Math.min(t/1024,e/768),1);this.countText&&(this.countText.setPosition(t/2,.45*e),this.countText.setScale(s)),this.incButton&&(this.incButton.setPosition(t/2,.55*e),this.incButton.setScale(s)),this.decButton&&(this.decButton.setPosition(t/2,.65*e),this.decButton.setScale(s)),this.goButton&&(this.goButton.setPosition(t/2,.75*e),this.goButton.setScale(s))}updateCountText(){this.countText.setText(`Count: ${this.count}`)}}class r extends i.Scene{constructor(){super("MainMenu"),e(this,"background",null),e(this,"logo",null),e(this,"title",null)}init(){this.background=null,this.logo=null,this.title=null}create(){this.refreshLayout(),this.scale.on("resize",(()=>this.refreshLayout())),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}refreshLayout(){const{width:t,height:e}=this.scale;this.cameras.resize(t,e),this.background||(this.background=this.add.image(0,0,"background").setOrigin(0)),this.background.setDisplaySize(t,e);const s=Math.min(t/1024,e/768);this.logo||(this.logo=this.add.image(0,0,"logo")),this.logo.setPosition(t/2,.38*e).setScale(s),this.title||(this.title=this.add.text(0,0,"Main Menu",{fontFamily:"Arial Black",fontSize:"38px",color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5)),this.title.setPosition(t/2,.6*e),this.title.setScale(s)}}class c extends i.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(e=>{t.width=4+460*e}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png")}create(){this.scene.start("MainMenu")}}const h={type:i.AUTO,parent:"game-container",backgroundColor:"#028af8",scale:{mode:i.Scale.RESIZE,autoCenter:i.Scale.CENTER_BOTH,width:1024,height:768},scene:[o,c,r,a,n]};document.addEventListener("DOMContentLoaded",(()=>{new i.Game({...h,parent:"game-container"})}));
//# sourceMappingURL=index-B58jFTvU.js.map
