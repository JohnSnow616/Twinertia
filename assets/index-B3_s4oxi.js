var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-B6oyfrAP.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var i=s();class a extends i.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class o extends i.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",e=>{t.width=4+460*e})}preload(){this.load.setPath("assets"),this.load.image("background","assets/bg.png"),this.load.spritesheet("boy","boy_character.png",{frameWidth:67,frameHeight:76,margin:0,spacing:0})}create(){this.scene.start("MainMenu")}}class r extends i.Scene{constructor(){super("MainMenu"),e(this,"background",null),e(this,"title",null),e(this,"playButton"),e(this,"settingsButton"),e(this,"quitButton")}init(){this.background=null,this.title=null}create(){this.refreshLayout(),this.cameras.main.fadeIn(800,0,0,0),this.playButton=this.createButton(.68*this.scale.height,"▶ PLAY"),this.settingsButton=this.createButton(.78*this.scale.height,"⚙ SETTINGS"),this.quitButton=this.createButton(.88*this.scale.height,"✖ QUIT"),this.playButton.on("pointerup",()=>{this.cameras.main.fadeOut(500,0,0,0),this.time.delayedCall(500,()=>this.scene.start("Instructions"))}),this.settingsButton.on("pointerup",()=>{this.settingsButton.setText("⚙ Coming Soon!"),this.tweens.add({targets:this.settingsButton,alpha:.5,yoyo:!0,duration:200})}),this.quitButton.on("pointerup",()=>{this.quitButton.setText("✖ Not available in browser"),this.tweens.add({targets:this.quitButton,alpha:.5,yoyo:!0,duration:300})}),this.scale.on("resize",()=>this.refreshLayout())}refreshLayout(){const{width:t,height:e}=this.scale;this.cameras.resize(t,e),this.background||(this.background=this.add.image(0,0,"background").setOrigin(0)),this.background.setDisplaySize(t,e),this.title||(this.title=this.add.text(t/2,.45*e,"T  W  I  N  E  R  T  I  A",{fontFamily:"Arial Black",fontSize:"72px",color:"#00ffff",stroke:"#000000",strokeThickness:8,shadow:{offsetX:0,offsetY:0,color:"#00ffff",blur:20,fill:!0}}).setOrigin(.5)),this.tweens.add({targets:this.title,scale:{from:1,to:1.05},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}createButton(t,e){const s=this.add.text(this.scale.width/2,t,e,{fontFamily:"Arial Black",fontSize:"36px",color:"#ffffff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setStyle({color:"#00e5ff",stroke:"#00ffff",strokeThickness:3})).on("pointerout",()=>s.setStyle({color:"#ffffff",stroke:"#000000",strokeThickness:0}));return s}}class h extends i.Scene{constructor(){super("Instructions"),e(this,"background"),e(this,"title"),e(this,"instructions"),e(this,"prompt"),e(this,"startKey")}create(){const{width:t,height:e}=this.scale;this.background=this.add.rectangle(t/2,e/2,t,e,0,.8),this.title=this.add.text(t/2,.25*e,"🕹️ HOW TO PLAY 🕹️",{fontSize:"48px",color:"#00ffcc",fontFamily:"Arial Black",align:"center"}).setOrigin(.5),this.instructions=this.add.text(t/2,.5*e,"➡ Move: Arrow Keys\n🕶 Switch Worlds: [SPACE]\n💎 Collect Orbs to Win\n⚠ Avoid Obstacles\n💚 Reach the Green Portal",{fontSize:"28px",color:"#ffffff",fontFamily:"Arial",align:"center",lineSpacing:10}).setOrigin(.5),this.prompt=this.add.text(t/2,.8*e,"Press [ENTER] to Start",{fontSize:"30px",color:"#00ff00",fontFamily:"Arial"}).setOrigin(.5),this.input.keyboard&&(this.startKey=this.input.keyboard.addKey(i.Input.Keyboard.KeyCodes.ENTER)),this.tweens.add({targets:[this.background,this.title,this.instructions,this.prompt],alpha:{from:0,to:1},duration:1e3,ease:"Sine.easeInOut"})}update(){this.startKey&&i.Input.Keyboard.JustDown(this.startKey)&&this.tweens.add({targets:[this.background,this.title,this.instructions,this.prompt],alpha:0,duration:400,onComplete:()=>this.scene.start("Game")})}}class l{constructor(){e(this,"currentWorld","light")}toggleWorld(){return this.currentWorld="light"===this.currentWorld?"shadow":"light",console.log(`[KIRO] Switched to ${this.currentWorld.toUpperCase()} WORLD`),this.currentWorld}getCurrentWorld(){return this.currentWorld}log(t,e,s){console.log(`[${t.toUpperCase()} WORLD] ${e} → ${s}`)}}class n extends i.Scene{constructor(){super("Game"),e(this,"kiro"),e(this,"cursors"),e(this,"worldText"),e(this,"lightGroup"),e(this,"shadowGroup"),e(this,"collectibles"),e(this,"collectedCount",0),e(this,"totalOrbs",0),e(this,"orbText"),e(this,"goal"),e(this,"hazard"),e(this,"player"),e(this,"currentWorld","light"),e(this,"isTransitioning",!1),e(this,"isDead",!1),e(this,"lightEnergy",100),e(this,"shadowEnergy",100),e(this,"energyDecayRate",5),e(this,"energyText"),e(this,"shadowTimer",0),e(this,"shadowLimit",8),e(this,"shadowTimerText"),e(this,"lives",3),e(this,"lifeIcons",[])}create(){this.add.image(0,0,"background").setOrigin(0).setScrollFactor(0).setDepth(-10).setDisplaySize(this.cameras.main.width,this.cameras.main.height),this.isDead=!1,this.kiro=new l,this.lives=3,this.lifeIcons=[],this.anims.create({key:"boy-idle",frames:this.anims.generateFrameNumbers("boy",{start:0,end:6}),frameRate:0,repeat:0}),this.anims.create({key:"boy-run",frames:this.anims.generateFrameNumbers("boy",{start:14,end:20}),frameRate:0,repeat:-1}),this.anims.create({key:"boy-jump",frames:this.anims.generateFrameNumbers("boy",{start:21,end:27}),frameRate:0,repeat:0}),this.player=this.physics.add.sprite(100,450,"boy",0),this.player.setOrigin(.5,1),this.player.play("boy-idle"),this.player.setCollideWorldBounds(!0),this.player.setGravityY(500),this.player.setBounce(0),this.player.setSize(32,60),this.player.setOffset(13,18),this.player.setFriction(1,1),this.lightGroup=this.physics.add.staticGroup(),this.shadowGroup=this.physics.add.staticGroup(),this.createLightPlatform(100,500,200,20),this.createShadowPlatform(100,500,200,20),this.createLightPlatform(400,400,150,20),this.createLightPlatform(650,350,200,20),this.createShadowPlatform(400,500,150,20),this.createShadowPlatform(600,450,150,20),this.hazard=this.add.rectangle(650,330,50,20,16711680),this.physics.add.existing(this.hazard,!0),this.collectibles=this.physics.add.group({allowGravity:!1,immovable:!0});const t=[{x:500,y:470},{x:600,y:430},{x:700,y:400}];t.forEach(t=>{const e=this.add.circle(t.x,t.y,8,65535);this.physics.add.existing(e);const s=e.body;s.setAllowGravity(!1),s.setImmovable(!0),e.setVisible(!1),s.enable=!1,e.collected=!1,this.tweens.add({targets:e,scale:{from:1,to:1.3},alpha:{from:.8,to:1},duration:800,yoyo:!0,repeat:-1}),this.collectibles.add(e)}),this.collectedCount=0,this.totalOrbs=t.length,this.goal=this.add.rectangle(800,300,40,60,8947848),this.physics.add.existing(this.goal,!0),this.lightGroup.add(this.goal),this.physics.add.overlap(this.player,this.goal,()=>this.reachGoal(),void 0,this);const e=this.add.rectangle(this.goal.x,this.goal.y,this.goal.width,this.goal.height,65280,0);e.setOrigin(this.goal.originX,this.goal.originY),e.setDepth(50),e.setVisible(!1),this.goal.overlay=e,this.physics.add.collider(this.player,this.lightGroup),this.physics.add.collider(this.player,this.shadowGroup),this.physics.add.overlap(this.player,this.collectibles,(t,e)=>this.collectItem(t,e),void 0,this),this.physics.add.overlap(this.player,this.goal,this.reachGoal,void 0,this),this.physics.add.overlap(this.player,this.hazard,this.hitHazard,void 0,this),this.cursors=this.input.keyboard.createCursorKeys(),this.worldText=this.add.text(10,10,"World: LIGHT",{fontFamily:"monospace",fontSize:"20px",color:"#ffffff"}).setScrollFactor(0),this.energyText=this.add.text(10,40,"Energy: Light 100 | Shadow 100",{fontFamily:"monospace",fontSize:"18px",color:"#ffffaa"}).setScrollFactor(0),this.orbText=this.add.text(10,70,`Orbs: 0/${this.totalOrbs}`,{fontFamily:"monospace",fontSize:"18px",color:"#00ffff"}).setScrollFactor(0),this.createLifeUI(),this.shadowTimerText=this.add.text(10,100,`Time: ${this.shadowLimit.toFixed(1)}s`,{fontFamily:"monospace",fontSize:"16px",color:"#ff66cc"}).setScrollFactor(0),this.shadowTimerText.setVisible(!1);const s="light"===this.currentWorld;this.shadowGroup.children.each(t=>{t.setVisible(!s);const e=t.body;return e&&(e.enable=!s,s||e.updateFromGameObject()),!0}),this.cameras.main.startFollow(this.player,!0,.1,.1),this.cameras.main.setBackgroundColor("#111122")}update(t,e){var s,a,o;if(this.isDead)return;const r=this.player.body;if(r.setVelocityX(0),(null==(s=this.cursors.left)?void 0:s.isDown)?(r.setVelocityX(-200),this.player.setFlipX(!0),r.blocked.down&&this.player.play("boy-run",!0)):(null==(a=this.cursors.right)?void 0:a.isDown)?(r.setVelocityX(200),this.player.setFlipX(!1),r.blocked.down&&this.player.play("boy-run",!0)):r.blocked.down&&this.player.play("boy-idle",!0),(null==(o=this.cursors.up)?void 0:o.isDown)&&r.blocked.down&&(r.setVelocityY(-350),this.player.play("boy-jump",!0)),this.player.y>600&&this.loseLife(),"light"===this.currentWorld?this.lightEnergy=Math.max(0,this.lightEnergy-this.energyDecayRate*(e/1e3)):this.shadowEnergy=Math.max(0,this.shadowEnergy-this.energyDecayRate*(e/1e3)),"shadow"===this.currentWorld){const t=(this.time.now-this.shadowTimer)/1e3,e=Math.max(0,this.shadowLimit-t);if(this.shadowTimerText&&(this.shadowTimerText.setText(`Time: ${e.toFixed(1)}s`),this.shadowTimerText.setVisible(!0)),e<=2&&e>0&&this.cameras.main.flash(80,255,50,50),e<=0)return void this.loseLife()}else this.shadowTimerText&&this.shadowTimerText.setVisible(!1);if(this.energyText.setText(`Energy: Light ${this.lightEnergy.toFixed(0)} | Shadow ${this.shadowEnergy.toFixed(0)}`),this.lightEnergy<=0||this.shadowEnergy<=0)this.loseLife();else if(i.Input.Keyboard.JustDown(this.cursors.space)){const t="light"===this.currentWorld?"shadow":"light";this.fadeWorldTransition(t)}}fadeWorldTransition(t){if(this.isTransitioning||t===this.currentWorld)return;this.isTransitioning=!0;const e=this.cameras.main;e.fadeOut(150,0,0,0),e.once("camerafadeoutcomplete",()=>{const s="light"===t;this.worldText.setText(`World: ${t.toUpperCase()}`),e.setBackgroundColor(s?"#111122":"#220011"),this.lightGroup.children.each(t=>{t.setVisible(s);const e=t.body;return e&&(e.enable=s,s&&e.updateFromGameObject()),!0}),this.shadowGroup.children.each(t=>{t.setVisible(!s);const e=t.body;return e&&(e.enable=!s,s||e.updateFromGameObject()),!0}),this.collectibles.children.each(t=>{const e=t,i=e.body,a=!!e.collected;return s||a?(e.setVisible(!1),i&&(i.enable=!1)):(e.setVisible(!0),i&&(i.enable=!0)),!0}),"shadow"===t?(this.shadowTimer=this.time.now,this.shadowTimerText&&(this.shadowTimerText.setText(`Time: ${this.shadowLimit.toFixed(1)}s`),this.shadowTimerText.setVisible(!0))):this.shadowTimerText&&this.shadowTimerText.setVisible(!1),e.fadeIn(150,0,0,0),e.once("camerafadeincomplete",()=>{this.currentWorld=t,this.isTransitioning=!1})})}createLightPlatform(t,e,s,i){const a=this.add.rectangle(t,e,s,i,16777215);this.physics.add.existing(a,!0),this.lightGroup.add(a)}createShadowPlatform(t,e,s,i){const a=this.add.rectangle(t,e,s,i,16733525,.5);this.physics.add.existing(a,!0),this.shadowGroup.add(a)}collectItem(t,e){if("shadow"!==this.currentWorld)return;const s=e,i=s.body;if(s.collected)return;s.collected=!0,s.setVisible(!1),i&&(i.enable=!1),this.collectedCount++,this.orbText.setText(`Orbs: ${this.collectedCount}/${this.totalOrbs}`),this.lightEnergy=Math.min(100,this.lightEnergy+20);const a=this.add.text(this.player.x-30,this.player.y-60,"+Energy",{fontFamily:"monospace",fontSize:"16px",color:"#00ffcc"});if(this.tweens.add({targets:a,alpha:0,y:a.y-20,duration:800,onComplete:()=>a.destroy()}),this.collectedCount>=this.totalOrbs){this.goal.setFillStyle(65280);const t=this.goal.overlay;t&&(t.setVisible(!0),t.setAlpha(0))}}reachGoal(){if("light"!==this.currentWorld)return;if(this.collectedCount<this.totalOrbs){const t=this.add.text(this.player.x-60,this.player.y-80,"Goal Locked!",{fontSize:"18px",color:"#ff3333",fontFamily:"monospace"});return void this.tweens.add({targets:t,alpha:0,duration:700,delay:800,onComplete:()=>t.destroy()})}if(this.isDead)return;this.isDead=!0,this.goal.setFillStyle(65280);const t=this.goal.overlay;t&&(t.setVisible(!0),t.setAlpha(0),t.setDepth(50)),this.physics.world.disable(this.player),this.player.setDepth(25);const e=this.goal.x,s=this.goal.y-(this.goal.height??40)/4;this.tweens.add({targets:t,scale:{from:1,to:1.3},alpha:{from:.2,to:1},duration:400,yoyo:!0,repeat:0}),t&&this.tweens.add({targets:t,alpha:{from:0,to:1},duration:400,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.player,x:e,y:s,scale:.2,alpha:0,duration:400,ease:"Sine.easeInOut",onUpdate:()=>{const t=this.player.alpha,e=i.Display.Color.Interpolate.ColorWithColor(i.Display.Color.ValueToColor(16777215),i.Display.Color.ValueToColor(65280),100,100-100*t);this.player.setTint(i.Display.Color.GetColor(e.r,e.g,e.b))},onComplete:()=>{this.player.setVisible(!1),this.player.clearTint();const t=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-80,"LEVEL COMPLETE!",{fontSize:"34px",color:"#00ff00",fontFamily:"monospace"});t.setOrigin(.5),t.setDepth(30),this.time.delayedCall(1200,()=>{this.scene.pause()})}})}hitHazard(){"shadow"!==this.currentWorld||this.isDead||this.loseLife()}loseLife(){if(this.isDead)return;this.isDead=!0,this.lives=Math.max(0,this.lives-1);const t=this.lifeIcons.pop();t&&this.tweens.add({targets:t,scaleX:0,scaleY:0,alpha:0,duration:400,ease:"Power2",onComplete:()=>t.destroy()}),this.player.setTint(16711680),this.player.setVelocity(0,0),this.player.anims.stop(),this.tweens.add({targets:[this.player],alpha:0,duration:600,ease:"Power2",onComplete:()=>{this.lives<=0?this.scene.restart():this.respawnPlayer()}})}respawnPlayer(){this.time.delayedCall(500,()=>{this.player.clearTint(),this.player.setAlpha(1),this.player.setVisible(!0),this.physics.world.enable(this.player),this.player.setPosition(100,440),this.player.setVelocity(0,0),this.currentWorld="light",this.isDead=!1;const t=this.player.body;t.updateFromGameObject(),t.checkCollision.none=!1,this.physics.world.collide(this.player,this.lightGroup),this.tweens.add({targets:[this.player],alpha:1,duration:300,ease:"Power2"})})}createLifeUI(){const t=this.cameras.main.width-20;this.lifeIcons.forEach(t=>t.destroy()),this.lifeIcons=[];for(let e=0;e<this.lives;e++){const s=t-28*e,i=this.add.rectangle(s,20,18,18,16711680).setOrigin(1,.5).setScrollFactor(0);this.lifeIcons.unshift(i)}}}class c extends i.Scene{constructor(){super("GameOver"),e(this,"camera"),e(this,"background"),e(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(0,0,"background").setOrigin(0).setAlpha(.5),this.gameover_text=this.add.text(0,0,"Game Over",{fontFamily:"Arial Black",fontSize:"64px",color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.updateLayout(this.scale.width,this.scale.height),this.scale.on("resize",t=>{const{width:e,height:s}=t;this.updateLayout(e,s)}),this.input.once("pointerdown",()=>{this.scene.start("MainMenu")})}updateLayout(t,e){this.cameras.resize(t,e),this.background&&this.background.setDisplaySize(t,e);const s=Math.min(Math.min(t/1024,e/768),1);this.gameover_text&&(this.gameover_text.setPosition(t/2,e/2),this.gameover_text.setScale(s))}}const d={type:i.AUTO,parent:"game-container",backgroundColor:"#028af8",scale:{mode:i.Scale.RESIZE,autoCenter:i.Scale.CENTER_BOTH,width:1024,height:768},physics:{default:"arcade",arcade:{debug:!1,gravity:{x:0,y:0}}},scene:[a,o,r,h,n,c]};document.addEventListener("DOMContentLoaded",()=>{new i.Game({...d,parent:"game-container"})});
//# sourceMappingURL=index-B3_s4oxi.js.map
