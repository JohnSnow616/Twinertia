var f=Object.defineProperty;var y=(n,h,t)=>h in n?f(n,h,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[h]=t;var a=(n,h,t)=>y(n,typeof h!="symbol"?h+"":h,t);import{r as g}from"./phaser-BQWvCh4m.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();var l=g();class m extends l.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class b extends l.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const h=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",t=>{h.width=4+460*t})}preload(){this.load.setPath("assets"),this.load.image("background","assets/bg.png"),this.load.spritesheet("boy","boy_character.png",{frameWidth:67,frameHeight:76,margin:0,spacing:0})}create(){this.scene.start("MainMenu")}}class w extends l.Scene{constructor(){super("MainMenu");a(this,"background",null);a(this,"title",null);a(this,"playButton");a(this,"settingsButton");a(this,"quitButton")}init(){this.background=null,this.title=null}create(){this.refreshLayout(),this.cameras.main.fadeIn(800,0,0,0),this.playButton=this.createButton(this.scale.height*.68,"▶ PLAY"),this.settingsButton=this.createButton(this.scale.height*.78,"⚙ SETTINGS"),this.quitButton=this.createButton(this.scale.height*.88,"✖ QUIT"),this.playButton.on("pointerup",()=>{this.cameras.main.fadeOut(500,0,0,0),this.time.delayedCall(500,()=>this.scene.start("Instructions"))}),this.settingsButton.on("pointerup",()=>{this.settingsButton.setText("⚙ Coming Soon!"),this.tweens.add({targets:this.settingsButton,alpha:.5,yoyo:!0,duration:200})}),this.quitButton.on("pointerup",()=>{this.quitButton.setText("✖ Not available in browser"),this.tweens.add({targets:this.quitButton,alpha:.5,yoyo:!0,duration:300})}),this.scale.on("resize",()=>this.refreshLayout())}refreshLayout(){const{width:t,height:i}=this.scale;this.cameras.resize(t,i),this.background||(this.background=this.add.image(0,0,"background").setOrigin(0)),this.background.setDisplaySize(t,i);const e=72;this.title||(this.title=this.add.text(t/2,i*.45,"T  W  I  N  E  R  T  I  A",{fontFamily:"Arial Black",fontSize:`${e}px`,color:"#00ffff",stroke:"#000000",strokeThickness:8,shadow:{offsetX:0,offsetY:0,color:"#00ffff",blur:20,fill:!0}}).setOrigin(.5)),this.tweens.add({targets:this.title,scale:{from:1,to:1.05},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}createButton(t,i){const e=this.add.text(this.scale.width/2,t,i,{fontFamily:"Arial Black",fontSize:"36px",color:"#ffffff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>e.setStyle({color:"#00e5ff",stroke:"#00ffff",strokeThickness:3})).on("pointerout",()=>e.setStyle({color:"#ffffff",stroke:"#000000",strokeThickness:0}));return e}}class x extends l.Scene{constructor(){super("Instructions");a(this,"background");a(this,"title");a(this,"instructions");a(this,"prompt");a(this,"startKey")}create(){const{width:t,height:i}=this.scale;this.background=this.add.rectangle(t/2,i/2,t,i,0,.8),this.title=this.add.text(t/2,i*.25,"🕹️ HOW TO PLAY 🕹️",{fontSize:"48px",color:"#00ffcc",fontFamily:"Arial Black",align:"center"}).setOrigin(.5),this.instructions=this.add.text(t/2,i*.5,`➡ Move: Arrow Keys
🕶 Switch Worlds: [SPACE]
💎 Collect Orbs to Win
⚠ Avoid Obstacles
💚 Reach the Green Portal`,{fontSize:"28px",color:"#ffffff",fontFamily:"Arial",align:"center",lineSpacing:10}).setOrigin(.5),this.prompt=this.add.text(t/2,i*.8,"Press [ENTER] to Start",{fontSize:"30px",color:"#00ff00",fontFamily:"Arial"}).setOrigin(.5),this.input.keyboard&&(this.startKey=this.input.keyboard.addKey(l.Input.Keyboard.KeyCodes.ENTER)),this.tweens.add({targets:[this.background,this.title,this.instructions,this.prompt],alpha:{from:0,to:1},duration:1e3,ease:"Sine.easeInOut"})}update(){this.startKey&&l.Input.Keyboard.JustDown(this.startKey)&&this.tweens.add({targets:[this.background,this.title,this.instructions,this.prompt],alpha:0,duration:400,onComplete:()=>this.scene.start("Game")})}}class T{constructor(){a(this,"currentWorld","light")}toggleWorld(){return this.currentWorld=this.currentWorld==="light"?"shadow":"light",console.log(`[KIRO] Switched to ${this.currentWorld.toUpperCase()} WORLD`),this.currentWorld}getCurrentWorld(){return this.currentWorld}log(h,t,i){console.log(`[${h.toUpperCase()} WORLD] ${t} → ${i}`)}}class S extends l.Scene{constructor(){super("Game");a(this,"kiro");a(this,"cursors");a(this,"worldText");a(this,"lightGroup");a(this,"shadowGroup");a(this,"collectibles");a(this,"collectedCount",0);a(this,"totalOrbs",0);a(this,"orbText");a(this,"goal");a(this,"hazard");a(this,"player");a(this,"currentWorld","light");a(this,"isTransitioning",!1);a(this,"isDead",!1);a(this,"lightEnergy",100);a(this,"shadowEnergy",100);a(this,"energyDecayRate",5);a(this,"energyText");a(this,"shadowTimer",0);a(this,"shadowLimit",8);a(this,"shadowTimerText");a(this,"lives",3);a(this,"lifeIcons",[])}create(){this.add.image(0,0,"background").setOrigin(0).setScrollFactor(0).setDepth(-10).setDisplaySize(this.cameras.main.width,this.cameras.main.height),this.isDead=!1,this.kiro=new T,this.lives=3,this.lifeIcons=[],this.anims.create({key:"boy-idle",frames:this.anims.generateFrameNumbers("boy",{start:0,end:6}),frameRate:0,repeat:0}),this.anims.create({key:"boy-run",frames:this.anims.generateFrameNumbers("boy",{start:14,end:20}),frameRate:0,repeat:-1}),this.anims.create({key:"boy-jump",frames:this.anims.generateFrameNumbers("boy",{start:21,end:27}),frameRate:0,repeat:0}),this.player=this.physics.add.sprite(100,450,"boy",0),this.player.setOrigin(.5,1),this.player.play("boy-idle"),this.player.setCollideWorldBounds(!0),this.player.setGravityY(500),this.player.setBounce(0),this.player.setSize(32,60),this.player.setOffset(13,18),this.player.setFriction(1,1),this.lightGroup=this.physics.add.staticGroup(),this.shadowGroup=this.physics.add.staticGroup(),this.createLightPlatform(100,500,200,20),this.createShadowPlatform(100,500,200,20),this.createLightPlatform(400,400,150,20),this.createLightPlatform(650,350,200,20),this.createShadowPlatform(400,500,150,20),this.createShadowPlatform(600,450,150,20),this.hazard=this.add.rectangle(650,330,50,20,16711680),this.physics.add.existing(this.hazard,!0),this.collectibles=this.physics.add.group({allowGravity:!1,immovable:!0});const t=[{x:500,y:470},{x:600,y:430},{x:700,y:400}];t.forEach(s=>{const r=this.add.circle(s.x,s.y,8,65535);this.physics.add.existing(r);const o=r.body;o.setAllowGravity(!1),o.setImmovable(!0),r.setVisible(!1),o.enable=!1,r.collected=!1,this.tweens.add({targets:r,scale:{from:1,to:1.3},alpha:{from:.8,to:1},duration:800,yoyo:!0,repeat:-1}),this.collectibles.add(r)}),this.collectedCount=0,this.totalOrbs=t.length,this.goal=this.add.rectangle(800,300,40,60,8947848),this.physics.add.existing(this.goal,!0),this.lightGroup.add(this.goal),this.physics.add.overlap(this.player,this.goal,()=>this.reachGoal(),void 0,this);const i=this.add.rectangle(this.goal.x,this.goal.y,this.goal.width,this.goal.height,65280,0);i.setOrigin(this.goal.originX,this.goal.originY),i.setDepth(50),i.setVisible(!1),this.goal.overlay=i,this.physics.add.collider(this.player,this.lightGroup),this.physics.add.collider(this.player,this.shadowGroup),this.physics.add.overlap(this.player,this.collectibles,(s,r)=>this.collectItem(s,r),void 0,this),this.physics.add.overlap(this.player,this.goal,this.reachGoal,void 0,this),this.physics.add.overlap(this.player,this.hazard,this.hitHazard,void 0,this),this.cursors=this.input.keyboard.createCursorKeys(),this.worldText=this.add.text(10,10,"World: LIGHT",{fontFamily:"monospace",fontSize:"20px",color:"#ffffff"}).setScrollFactor(0),this.energyText=this.add.text(10,40,"Energy: Light 100 | Shadow 100",{fontFamily:"monospace",fontSize:"18px",color:"#ffffaa"}).setScrollFactor(0),this.orbText=this.add.text(10,70,`Orbs: 0/${this.totalOrbs}`,{fontFamily:"monospace",fontSize:"18px",color:"#00ffff"}).setScrollFactor(0),this.createLifeUI(),this.shadowTimerText=this.add.text(10,100,`Time: ${this.shadowLimit.toFixed(1)}s`,{fontFamily:"monospace",fontSize:"16px",color:"#ff66cc"}).setScrollFactor(0),this.shadowTimerText.setVisible(!1);const e=this.currentWorld==="light";this.shadowGroup.children.each(s=>{s.setVisible(!e);const o=s.body;return o&&(o.enable=!e,e||o.updateFromGameObject()),!0}),this.cameras.main.startFollow(this.player,!0,.1,.1),this.cameras.main.setBackgroundColor("#111122")}update(t,i){var o,c,p;if(this.isDead)return;const e=this.player.body,s=200,r=-350;if(e.setVelocityX(0),(o=this.cursors.left)!=null&&o.isDown?(e.setVelocityX(-s),this.player.setFlipX(!0),e.blocked.down&&this.player.play("boy-run",!0)):(c=this.cursors.right)!=null&&c.isDown?(e.setVelocityX(s),this.player.setFlipX(!1),e.blocked.down&&this.player.play("boy-run",!0)):e.blocked.down&&this.player.play("boy-idle",!0),(p=this.cursors.up)!=null&&p.isDown&&e.blocked.down&&(e.setVelocityY(r),this.player.play("boy-jump",!0)),this.player.y>600&&this.loseLife(),this.currentWorld==="light"?this.lightEnergy=Math.max(0,this.lightEnergy-this.energyDecayRate*(i/1e3)):this.shadowEnergy=Math.max(0,this.shadowEnergy-this.energyDecayRate*(i/1e3)),this.currentWorld==="shadow"){const u=(this.time.now-this.shadowTimer)/1e3,d=Math.max(0,this.shadowLimit-u);if(this.shadowTimerText&&(this.shadowTimerText.setText(`Time: ${d.toFixed(1)}s`),this.shadowTimerText.setVisible(!0)),d<=2&&d>0&&this.cameras.main.flash(80,255,50,50),d<=0){this.loseLife();return}}else this.shadowTimerText&&this.shadowTimerText.setVisible(!1);if(this.energyText.setText(`Energy: Light ${this.lightEnergy.toFixed(0)} | Shadow ${this.shadowEnergy.toFixed(0)}`),this.lightEnergy<=0||this.shadowEnergy<=0){this.loseLife();return}if(l.Input.Keyboard.JustDown(this.cursors.space)){const u=this.currentWorld==="light"?"shadow":"light";this.fadeWorldTransition(u)}}fadeWorldTransition(t){if(this.isTransitioning||t===this.currentWorld)return;this.isTransitioning=!0;const i=this.cameras.main;i.fadeOut(150,0,0,0),i.once("camerafadeoutcomplete",()=>{const e=t==="light";this.worldText.setText(`World: ${t.toUpperCase()}`),i.setBackgroundColor(e?"#111122":"#220011"),this.lightGroup.children.each(s=>{s.setVisible(e);const o=s.body;return o&&(o.enable=e,e&&o.updateFromGameObject()),!0}),this.shadowGroup.children.each(s=>{s.setVisible(!e);const o=s.body;return o&&(o.enable=!e,e||o.updateFromGameObject()),!0}),this.collectibles.children.each(s=>{const r=s,o=r.body,c=!!r.collected;return!e&&!c?(r.setVisible(!0),o&&(o.enable=!0)):(r.setVisible(!1),o&&(o.enable=!1)),!0}),t==="shadow"?(this.shadowTimer=this.time.now,this.shadowTimerText&&(this.shadowTimerText.setText(`Time: ${this.shadowLimit.toFixed(1)}s`),this.shadowTimerText.setVisible(!0))):this.shadowTimerText&&this.shadowTimerText.setVisible(!1),i.fadeIn(150,0,0,0),i.once("camerafadeincomplete",()=>{this.currentWorld=t,this.isTransitioning=!1})})}createLightPlatform(t,i,e,s){const r=this.add.rectangle(t,i,e,s,16777215);this.physics.add.existing(r,!0),this.lightGroup.add(r)}createShadowPlatform(t,i,e,s){const r=this.add.rectangle(t,i,e,s,16733525,.5);this.physics.add.existing(r,!0),this.shadowGroup.add(r)}collectItem(t,i){if(this.currentWorld!=="shadow")return;const e=i,s=e.body;if(e.collected)return;e.collected=!0,e.setVisible(!1),s&&(s.enable=!1),this.collectedCount++,this.orbText.setText(`Orbs: ${this.collectedCount}/${this.totalOrbs}`),this.lightEnergy=Math.min(100,this.lightEnergy+20);const r=this.add.text(this.player.x-30,this.player.y-60,"+Energy",{fontFamily:"monospace",fontSize:"16px",color:"#00ffcc"});if(this.tweens.add({targets:r,alpha:0,y:r.y-20,duration:800,onComplete:()=>r.destroy()}),this.collectedCount>=this.totalOrbs){this.goal.setFillStyle(65280);const o=this.goal.overlay;o&&(o.setVisible(!0),o.setAlpha(0))}}reachGoal(){if(this.currentWorld!=="light")return;if(this.collectedCount<this.totalOrbs){const s=this.add.text(this.player.x-60,this.player.y-80,"Goal Locked!",{fontSize:"18px",color:"#ff3333",fontFamily:"monospace"});this.tweens.add({targets:s,alpha:0,duration:700,delay:800,onComplete:()=>s.destroy()});return}if(this.isDead)return;this.isDead=!0,this.goal.setFillStyle(65280);const t=this.goal.overlay;t&&(t.setVisible(!0),t.setAlpha(0),t.setDepth(50)),this.physics.world.disable(this.player),this.player.setDepth(25);const i=this.goal.x,e=this.goal.y-(this.goal.height??40)/4;this.tweens.add({targets:t,scale:{from:1,to:1.3},alpha:{from:.2,to:1},duration:400,yoyo:!0,repeat:0}),t&&this.tweens.add({targets:t,alpha:{from:0,to:1},duration:400,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.player,x:i,y:e,scale:.2,alpha:0,duration:400,ease:"Sine.easeInOut",onUpdate:()=>{const s=this.player.alpha,r=l.Display.Color.Interpolate.ColorWithColor(l.Display.Color.ValueToColor(16777215),l.Display.Color.ValueToColor(65280),100,100-s*100);this.player.setTint(l.Display.Color.GetColor(r.r,r.g,r.b))},onComplete:()=>{this.player.setVisible(!1),this.player.clearTint();const s=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-80,"LEVEL COMPLETE!",{fontSize:"34px",color:"#00ff00",fontFamily:"monospace"});s.setOrigin(.5),s.setDepth(30),this.time.delayedCall(1200,()=>{this.scene.pause()})}})}hitHazard(){this.currentWorld==="shadow"&&!this.isDead&&this.loseLife()}loseLife(){if(this.isDead)return;this.isDead=!0,this.lives=Math.max(0,this.lives-1);const t=this.lifeIcons.pop();t&&this.tweens.add({targets:t,scaleX:0,scaleY:0,alpha:0,duration:400,ease:"Power2",onComplete:()=>t.destroy()}),this.player.setTint(16711680),this.player.setVelocity(0,0),this.player.anims.stop(),this.tweens.add({targets:[this.player],alpha:0,duration:600,ease:"Power2",onComplete:()=>{this.lives<=0?this.scene.restart():this.respawnPlayer()}})}respawnPlayer(){this.time.delayedCall(500,()=>{this.player.clearTint(),this.player.setAlpha(1),this.player.setVisible(!0),this.physics.world.enable(this.player),this.player.setPosition(100,440),this.player.setVelocity(0,0),this.currentWorld="light",this.isDead=!1;const t=this.player.body;t.updateFromGameObject(),t.checkCollision.none=!1,this.physics.world.collide(this.player,this.lightGroup),this.tweens.add({targets:[this.player],alpha:1,duration:300,ease:"Power2"})})}createLifeUI(){const t=this.cameras.main.width-20,i=20,e=28;this.lifeIcons.forEach(s=>s.destroy()),this.lifeIcons=[];for(let s=0;s<this.lives;s++){const r=t-s*e,o=this.add.rectangle(r,i,18,18,16711680).setOrigin(1,.5).setScrollFactor(0);this.lifeIcons.unshift(o)}}}class O extends l.Scene{constructor(){super("GameOver");a(this,"camera");a(this,"background");a(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(0,0,"background").setOrigin(0).setAlpha(.5),this.gameover_text=this.add.text(0,0,"Game Over",{fontFamily:"Arial Black",fontSize:"64px",color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.updateLayout(this.scale.width,this.scale.height),this.scale.on("resize",t=>{const{width:i,height:e}=t;this.updateLayout(i,e)}),this.input.once("pointerdown",()=>{this.scene.start("MainMenu")})}updateLayout(t,i){this.cameras.resize(t,i),this.background&&this.background.setDisplaySize(t,i);const e=Math.min(Math.min(t/1024,i/768),1);this.gameover_text&&(this.gameover_text.setPosition(t/2,i/2),this.gameover_text.setScale(e))}}const k={type:l.AUTO,parent:"game-container",backgroundColor:"#028af8",scale:{mode:l.Scale.RESIZE,autoCenter:l.Scale.CENTER_BOTH,width:1024,height:768},physics:{default:"arcade",arcade:{debug:!1,gravity:{x:0,y:0}}},scene:[m,b,w,x,S,O]},v=n=>new l.Game({...k,parent:n});document.addEventListener("DOMContentLoaded",()=>{v("game-container")});
//# sourceMappingURL=index-hkR6gCj1.js.map
